package calculator;

import java.util.ArrayList;
import java.util.HashMap;

import entity.Student;
import entity.Person;
import filter.IFilterAbs;

public class SubjectCalculator extends CalculatorAbs {
	
	private IFilterAbs filter;
		
	public SubjectCalculator(IFilterAbs filter) {
		super();
		this.filter = filter;
	}
	
	@Override
	public HashMap<String, Object> calcular(ArrayList<Person> students) {
		HashMap<String, Object> studentsGroup = new HashMap<>();
		for(Person student: students) {
			if(!studentsGroup.containsKey(student.getId())) {
				if(((Student) student).getMaterias()!=null) {
					if(filter.isValid(student)) {
						studentsGroup.put(student.getId(), student);
					}
				}
			}
		}
		return studentsGroup;
	}

}
